script:
  after:
    - action 'launch_menu_rehash'

control:
  action:

    launch_menu_rehash: |
      $launch_menu = ENV['PATH'].squeeze(':').split(':').map do |d|
        Dir.exist? d and Dir.entries(d).select do |f|
          entry = File.join(d, f)
          File.file? entry and File.executable? entry
        end
      end.compact.flatten.uniq

    launch_menu: |
      if choice = key_menu($launch_menu, 'launch:', :program)
        launch choice
      end

